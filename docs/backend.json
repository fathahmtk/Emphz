{
  "entities": {
    "Product": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Product",
      "type": "object",
      "description": "Represents a product in the GRP catalog.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Product entity."
        },
        "name": {
          "type": "string",
          "description": "Name of the product."
        },
        "description": {
          "type": "string",
          "description": "Detailed description of the product specifications."
        },
        "imageUrl": {
          "type": "string",
          "description": "URL of the product image.",
          "format": "uri"
        },
        "specifications": {
          "type": "string",
          "description": "Technical specifications of the product."
        }
      },
      "required": [
        "id",
        "name",
        "description",
        "imageUrl",
        "specifications"
      ]
    },
    "ProjectCaseStudy": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "ProjectCaseStudy",
      "type": "object",
      "description": "Represents a project case study.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the ProjectCaseStudy entity."
        },
        "title": {
          "type": "string",
          "description": "Title of the project case study."
        },
        "details": {
          "type": "string",
          "description": "Detailed information about the project."
        },
        "beforeImageUrl": {
          "type": "string",
          "description": "URL of the 'before' image.",
          "format": "uri"
        },
        "afterImageUrl": {
          "type": "string",
          "description": "URL of the 'after' image.",
          "format": "uri"
        },
        "location": {
          "type": "string",
          "description": "Location of the project."
        },
        "clientType": {
          "type": "string",
          "description": "Type of client for the project."
        }
      },
      "required": [
        "id",
        "title",
        "details",
        "beforeImageUrl",
        "afterImageUrl",
        "location",
        "clientType"
      ]
    },
    "Lead": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Lead",
      "type": "object",
      "description": "Represents a lead captured from the contact form.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Lead entity."
        },
        "name": {
          "type": "string",
          "description": "Name of the lead."
        },
        "email": {
          "type": "string",
          "description": "Email address of the lead.",
          "format": "email"
        },
        "phone": {
          "type": "string",
          "description": "Phone number of the lead."
        },
        "message": {
          "type": "string",
          "description": "Message from the lead."
        },
        "dateCreated": {
          "type": "string",
          "description": "Date and time when the lead was created.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "name",
        "email",
        "phone",
        "message",
        "dateCreated"
      ]
    },
    "TechnicalDownload": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "TechnicalDownload",
      "type": "object",
      "description": "Represents a downloadable technical document.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the TechnicalDownload entity."
        },
        "title": {
          "type": "string",
          "description": "Title of the technical download."
        },
        "fileUrl": {
          "type": "string",
          "description": "URL of the downloadable file (PDF).",
          "format": "uri"
        },
        "description": {
          "type": "string",
          "description": "A brief description of the technical download."
        }
      },
      "required": [
        "id",
        "title",
        "fileUrl",
        "description"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/products/{productId}",
        "definition": {
          "entityName": "Product",
          "schema": {
            "$ref": "#/backend/entities/Product"
          },
          "description": "Stores product information.",
          "params": [
            {
              "name": "productId",
              "description": "The unique identifier of the product."
            }
          ]
        }
      },
      {
        "path": "/project_case_studies/{projectCaseStudyId}",
        "definition": {
          "entityName": "ProjectCaseStudy",
          "schema": {
            "$ref": "#/backend/entities/ProjectCaseStudy"
          },
          "description": "Stores project case study information.",
          "params": [
            {
              "name": "projectCaseStudyId",
              "description": "The unique identifier of the project case study."
            }
          ]
        }
      },
      {
        "path": "/leads/{leadId}",
        "definition": {
          "entityName": "Lead",
          "schema": {
            "$ref": "#/backend/entities/Lead"
          },
          "description": "Stores lead information captured from the contact form.",
          "params": [
            {
              "name": "leadId",
              "description": "The unique identifier of the lead."
            }
          ]
        }
      },
      {
        "path": "/technical_downloads/{technicalDownloadId}",
        "definition": {
          "entityName": "TechnicalDownload",
          "schema": {
            "$ref": "#/backend/entities/TechnicalDownload"
          },
          "description": "Stores technical download information.",
          "params": [
            {
              "name": "technicalDownloadId",
              "description": "The unique identifier of the technical download."
            }
          ]
        }
      }
    ],
    "reasoning": "The Firestore structure is designed to address the 'auth/invalid-api-key' error and fulfill the application's data storage needs, focusing on clear authorization and data integrity.  The provided error indicates an issue with the Firebase API key configuration. Ensure the Firebase configuration object (`firebaseConfig`) within `src/firebase/index.ts` contains the correct `apiKey` value, and that the API key is enabled within the Firebase project settings in the Firebase Console.  Also, check that Firebase billing is enabled for the project, as some features require a paid plan. The structure avoids hierarchical authorization dependencies to ensure security and enables atomic operations (transactions/batches) without `get()` calls in the rules. All documents within the same collection will have the same security requirements to simplify the security rules.\n\n**Products:** Products are stored in a top-level `/products` collection. This simplifies querying and management.\n\n**Project Case Studies:** Project case studies are stored in a top-level `/project_case_studies` collection, facilitating easy access and listing.\n\n**Leads:** Leads are stored in a top-level `/leads` collection. Because leads are created anonymously, there are no authorization concerns.\n\n**Technical Downloads:** Technical downloads are stored in a top-level `/technical_downloads` collection.\n\nThis structure ensures **Authorization Independence**, which is critical for secure and scalable applications. By avoiding hierarchical authorization dependencies, the design simplifies security rules and avoids breaking atomic operations."
  }
}